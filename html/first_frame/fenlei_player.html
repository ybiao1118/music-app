<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="copyright" content="www.apicloud.com" />
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <title>首页推荐</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css" />
		    <link rel="stylesheet" type="text/css" href="../../css/aui.css" />
    <style>
    .info_top{
      height: 100px;
      background-color: #ffffff;
    }
    .loginHide {
        display: none;
    }

    .loginmeg {
        text-align: center;
        font-size: 20px;
    }

    .loginBox {
        display: block;
    }
    .login_info{

      width: 70%;
      margin-left: auto;;
      margin-right: auto;;
      margin-top: 5%;
      margin-bottom: 5%;
    }
    .createrlogo{
      width: 2em;
    }
    .list-item-name{
    float: right;
    margin-right: 10px;
    }
    .index_bofang{
    width: 10%;
    float: right;
    margin-right: 10px;
    display: inline-block;
    }
    .index_bofang img{
    width: 30px;
    margin-top: 10%;
    /*margin-bottom: 20%;*/
    }
    .sectionTitle {
        height: 2em;
        line-height: 2em;
        font-size: 1.12em;
    }

    .sectionTitle .titleDivider {
        display: inline-block;
        height: 1.12em;
        width: 3px;
        vertical-align: top;
        background-color: #D43C33;
        margin-top: 0.44em;
        margin-left: 0.7em;
        margin-right: 0.3em;
    }
    .active{
      color: #D43C33;
      /*border-bottom: 1px solid #D43C33;*/
    }
    </style>
</head>
<body>

<div class="sectionTitle">
  <div class="titleDivider"></div><span>歌手首拼</span></div>
  <section class="aui-grid">
          <div class="aui-row">
              <div class="aui-col-xs-1">
                  <div class="aui-grid-label" >A</div>
              </div>
              <div class="aui-col-xs-1">
                  <div class="aui-grid-label" >B</div>
              </div>
              <div class="aui-col-xs-1">
                  <div class="aui-grid-label">C</div>
              </div>
              <div class="aui-col-xs-1">
                  <div class="aui-grid-label" >D</div>
              </div>
              <div class="aui-col-xs-1">
                  <div class="aui-grid-label" >E</div>
              </div>
              <div class="aui-col-xs-1">
                  <div class="aui-grid-label" >F</div>
              </div>
              <div class="aui-col-xs-1">
                  <div class="aui-grid-label" >G</div>
              </div>
              <div class="aui-col-xs-1">
                  <div class="aui-grid-label" >H</div>
              </div>
              <div class="aui-col-xs-1">
                  <div class="aui-grid-label" >I</div>
              </div>
              <div class="aui-col-xs-1">
                  <div class="aui-grid-label" >J</div>
              </div>
              <div class="aui-col-xs-1">
                  <div class="aui-grid-label" >K</div>
              </div>
              <div class="aui-col-xs-1">
                  <div class="aui-grid-label">M</div>
              </div>
              <div class="aui-col-xs-1">
                  <div class="aui-grid-label" >L</div>
              </div>
              <div class="aui-col-xs-1">
                  <div class="aui-grid-label" >N</div>
              </div>
              <div class="aui-col-xs-1">
                  <div class="aui-grid-label" >O</div>
              </div>
              <div class="aui-col-xs-1">
                  <div class="aui-grid-label" >P</div>
              </div>
              <div class="aui-col-xs-1">
                  <div class="aui-grid-label" >Q</div>
              </div>
              <div class="aui-col-xs-1">
                  <div class="aui-grid-label" >R</div>
              </div>
              <div class="aui-col-xs-1">
                  <div class="aui-grid-label" >S</div>
              </div>
              <div class="aui-col-xs-1">
                  <div class="aui-grid-label" >T</div>
              </div>
              <div class="aui-col-xs-1">
                  <div class="aui-grid-label" >U</div>
              </div>
              <div class="aui-col-xs-1">
                  <div class="aui-grid-label" >V</div>
              </div>
              <div class="aui-col-xs-1">
                  <div class="aui-grid-label" >W</div>
              </div>
              <div class="aui-col-xs-1">
                  <div class="aui-grid-label" >X</div>
              </div>
              <div class="aui-col-xs-1">
                  <div class="aui-grid-label" >Y</div>
              </div><div class="aui-col-xs-1">
                  <div class="aui-grid-label" >Z</div>
              </div>
          </div>
      </section>

      <div class="sectionTitle " >
          <div class="titleDivider"></div><span id="listname">热门歌手</span></div>
          <section class="aui-content">
              <ul class="aui-list aui-list-in aui-margin-b-15" id="list_item">
              </ul>
          </section>
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript" src="../../script/common.js"></script>
<script type="text/javascript">
function openNewWin(wname){
  var music =$api.getStorage("music");
  api.openWin({
      name: wname,
      url: '../../html/'+wname+'.html',
      scrollEnabled:false,
      pageParam:{music:music}
  });
}

  var list_item=$api.byId('list_item');
  var listname=$api.byId('listname');
  var py=null;
  var playerlist=null;
var list=$api.domAll('.aui-grid-label');
for(var i=0;i<list.length;i++){
  list[i].onclick=(function(arg){
return function(){
      for(var j=0;j<list.length;j++){
        if(j!=arg){
          if ($api.hasCls(list[j], 'active')) {
              $api.removeCls(list[j], 'active');
          }
        }
      }
      $api.addCls(list[arg], 'active');
       py=$api.text(list[arg]);
       $api.text(listname, $api.text(list[arg]));

      api.ajax({
          url: getURL_T()+'/play/selectpy',
          method: 'get',
          data: {
              values: {
                  pingyin:py
              }
          }
      },function(ret, err){
          if (ret) {
              if(ret.status=="200"){
                  playerlist=ret.data;
                if(playerlist==null){

                var  html='<li class="aui-list-item"> <div class="aui-list-item-inner "><div class="aui-list-item-title" style="color:#D43C33">不存在歌手</div></div></li>';
                  list_item.innerHTML=html;
                }else {
                    playerlist=ret.data;
                    var html='';
                    for(var i=0;i<playerlist.length;i++){
                      var div='<li class="aui-list-item biaozhi"><div class="aui-list-item-label-icon"><img src="'
                              +(getURL_N()+playerlist[i].image)
                              +'"style="height:2em;width:2em;"></div>'
                              +'<div class="aui-list-item-inner aui-list-item-arrow"><div class="aui-list-item-title">'
                              +playerlist[i].name
                              +'</div></div></li>'
                            html+=div;
                    }
                      list_item.innerHTML=html;
                      var tags=$api.domAll('.biaozhi');
                      for(var i=0;i<tags.length;i++){
                        tags[i].onclick=(function(arg){
                      return function(){
                          openplayer(playerlist[arg].id);
                          };
                  })(i);
                      }
                }

              }
          }
      });

    };
})(i);
}
function openplayer(pid){
  api.openWin({
      name: 'player_top',
      url: '../../html/player_top.html',
      pageParam: {
          pid: pid,
          tag:"sousuo"
      }
  });
}
apiready=function(){
  shuju();
  api.setRefreshHeaderInfo({
      visible: true,
      loadingImg: 'widget://image/refresh.png',
      bgColor: '#E9967A',
      textColor: '#fff',
      textDown: '下拉刷新...',
      textUp: '松开刷新...',
      showTime: true
  }, function(ret, err){

  });

}
function shuju(){
  api.ajax({
      url: getURL_T()+'/play/selecthot',
      method: 'get',
  },function(ret, err){
      if (ret) {
        if(ret.status=="200"){
        playerlist=ret.data;
          if(playerlist==null){
            var  html='<li class="aui-list-item"> <div class="aui-list-item-inner "><div class="aui-list-item-title" style="color:#D43C33">不存在歌手</div></div></li>';
              list_item.innerHTML=html;
          }else{
            var html='';
            for(var i=0;i<playerlist.length;i++){
              var div='<li class="aui-list-item biaozhi"><div class="aui-list-item-label-icon"><img src="'
                      +(getURL_N()+playerlist[i].image)
                      +'"style="height:2em;width:2em;"></div>'
                      +'<div class="aui-list-item-inner aui-list-item-arrow"><div class="aui-list-item-title">'
                      +playerlist[i].name
                      +'</div></div></li>'
                    html+=div;
            }
              list_item.innerHTML=html;
              var tags=$api.domAll('.biaozhi');
              for(var i=0;i<tags.length;i++){
                tags[i].onclick=(function(arg){
              return function(){
                  openplayer(playerlist[arg].id);
                  };
          })(i);
              }
          }
          api.refreshHeaderLoadDone();
        }
      }
  });
}
</script>

</html>
